<view class="container">
  <!-- 文件名规则设置 -->
  <view class="card">
    <view class="section-title">文件名规则设置</view>
    
    <view class="form-item">
      <view class="form-label">文件名匹配规则</view>
      <t-input value="{{filenamePattern}}" placeholder="输入正则表达式" bind:change="onPatternChange" />
      <view class="help-text">使用正则表达式，括号内为捕获组，用于提取日期。例如：(\d+)月(\d+)日财报\.xlsx</view>
    </view>
  </view>

  <!-- 数据单元格设置 -->
  <view class="card">
    <view class="section-title">数据单元格设置</view>
    
    <view class="form-item">
      <view class="form-label">目标单元格位置</view>
      <view class="cell-input-group">
        <view class="cell-input-item">
          <t-input type="number" value="{{rowIndex}}" placeholder="行号" bind:change="onRowChange" />
          <view class="help-text">行号</view>
        </view>
        <view class="cell-input-item">
          <t-input type="number" value="{{columnIndex}}" placeholder="列号" bind:change="onColumnChange" />
          <view class="help-text">列号</view>
        </view>
      </view>
      <view class="help-text">指定要提取数据的单元格位置（例如：第2行第3列对应Excel中的C2）</view>
    </view>
  </view>

  <!-- 数据管理 -->
  <view class="card">
    <view class="section-title">数据管理</view>
    <t-cell title="当前记录总数" note="{{recordCount}} 条" />
    <t-cell title="导入数据" hover arrow note="从备份文件恢复" bind:tap="onImportData" />
    <t-cell title="导出数据" hover arrow note="备份所有记录到文件" bind:tap="onExportData" />
    <t-cell title="清空全部记录" hover arrow bind:tap="showClearDialog" t-class-title="cell-title-danger" />
  </view>

  <!-- 危险操作 -->
  <view class="card">
    <view class="section-title">系统设置</view>
    <t-cell title="恢复默认设置" hover arrow bind:tap="onRestoreDefault" />
  </view>

  <!-- 保存按钮 -->
  <view class="save-button-container">
    <t-button theme="primary" block bind:tap="onSave">保存设置</t-button>
  </view>

  <!-- 清空确认对话框 -->
  <t-dialog
    visible="{{dialogVisible}}"
    title="确认操作"
    content="此操作将永久删除所有记录，且无法恢复。您确定要继续吗？"
    confirm-btn="我意已决"
    cancel-btn="再想想"
    bind:confirm="onClearRecords"
    bind:cancel="hideClearDialog"
  >
  </t-dialog>
</view> 